<div class="sidecar" ng-controller="SidecarController" ng-init="setView('explorer')">
  <div ng-include="templates['sidecar']"></div>
</div>

<div class="col-xs-12" ng-controller="AssetDetailsController">
  <div class="row" ng-show="pendingThinking">
    <div class="row">
      <div class="col-xs-8">
        <div class="panel panel-default">
          <div class="panel-body">
           <div class="row"> <div class="col-xs-12"><h2>{{property.name}} <span class="label label-default" style="font-size: 12px;vertical-align: middle;">#{{propertyId}}</span></h2></div></div>
           <div class="row" style="margin-bottom: 30px;"> <div class="col-xs-12"><span class="label" style="background-color: #EEE;color: #666;">{{property.category}} > {{property.subcategory}}</span></div></div>
           <div class="row" style="margin-bottom: 30px;">
             <div class="col-xs-12">
              <p>
                {{property.data}}
              </p>
             </div>
           </div>
           <div class="row" style="margin-bottom: 20px;">
             <div class="col-xs-12">
              <p>
                For more details visit: <a href="{{data.propertyUrl}}">{{property.url}}</a>
              </p>
             </div>
           </div>
           <div class="row" style="margin-bottom: 20px;">
             <div class="col-xs-12">
              <p>
                Issuance Address: <span class="label label-success"><img src="/assets/img/miniomni.png">{{property.issuer.substr(0,5)}}...{{property.issuer.substr(-5,5)}}</span>
              </p>
             </div>
           </div>
           <div class="row">
            <div class="col-xs-12" style="position: relative;">
              <div class="alert alert-info text-center" style="border-radius: 0px">{{infoMessage}}</div>
              <button class="btn btn-success btn-lg" ng-click="pendingThinking = false" ng-show="canParticipate" style="position: absolute;top: 0px;right: 20px;margin-top: 15px;font-size: 23px;border-radius: 0px;-webkit-box-shadow: 5px 5px #ccc;-moz-box-shadow: 5px 5px #ccc;box-shadow: 5px 5px #ccc;">Participate</button>
            </div>
           </div>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-body">
            <h3>Accepted Currency</h3>
            <table class="table">
              <tr ng-repeat="currency in acceptedCurrencies">
                <td>{{currency.name}}</td>
                <td>Rate</td>
                <td>{{currency.rate}}</td>
              </tr>
            </table>
          </div>
        </div>
      </div>
      <div class="col-xs-4">
        <div class="row show-grid">
          <span style="color: #ccc;font-size: large;">Share this page:</span>
          <span class="pull-right"> 
            <a href="#"><img src="/assets/img/social-icons/linkedIn-round.png" /> </a> 
            <a href="#"><img src="/assets/img/social-icons/facebook-round.png" /> </a> 
            <a href="#"><img src="/assets/img/social-icons/twitter-round.png" /> </a>
            <a href="#"><img src="/assets/img/social-icons/gplus-round.png" /> </a>
          </span>
        </div>
        <div class="row show-grid bg-active">
          <div class="col-xs-12">
            <h3><span ng-show="isOwner">Your </span>Active crowdsale</h3>
            <p>
              Time until closing:
            </p>
            <div id="timerWrapper"></div>
          </div>
        </div>
        <div class="row show-grid">
          <div class="col-xs-12">
            Crowdsale started {{formatedStartDate}} (~{{daysAgo}} days ago)
          </div>
        </div>
        <div class="row show-grid bg-active">
          <div class="col-xs-12">
            <span class="pull-left" style="padding-top: 41px">Current early bird bonus:</span> <div class="shout pull-right"><span>+{{earlyBirdBonus}}%</span></div>
          </div>
        </div>
        <div class="row show-grid bg-active">
          <div class="col-xs-12">
            <span class="tag">{{crowdsale.participanttokens}}</span>
            <span class="help-block">Tokens already bought by participants</span>
            <span class="tag">{{crowdsale.issuertokens}}</span>
            <span class="help-block">Tokens created for the issuer (%{{crowdsale.percenttoissuer}})</span>
          </div>
        </div>
        <div class="row show-grid bg-active">
          <div class="col-xs-12">
            <h4 style="color: #ccc">Invested Funds</h4>
          </div>
          <div class="col-xs-7">
            <span>Estimated total worth invested in this crowdsale:</span>
          </div> 
          <div class="col-xs-12" >
            <span class="tag">{{estimatedWorth}}</span> Dollars
          </div>
        </div>
      </div>
    </div>
    <div class="row" ng-if="!$scope.property.fixedissuance">
      <h2>Crowdsale history</h2>
      <span>Found {{history.total}} investment transactions</span>
      <div class="scroll">
        <div class="scroll-body" infinite-scroll='loadHistory()' infinite-scroll-disabled='history.loading' infinite-scroll-distance='3'>
          <div class="panel panel-default" ng-repeat="transaction in history.transactions">
            <div class="panel-body">
              <div class="row" style="margin-bottom: 15px;">
                <div class="col-xs-4"><h6>{{formatTransactionTime(transaction.blocktime,"elapsed")}}</h6><span style="color: #ccc">{{formatTransactionTime(transaction.blocktime)}}</span></div>
                <div class="col-xs-8">
                  <span class="pull-right" style="margin-right: 20px;">
                    <div class="row" style="border: 1px solid #ccc;padding: 3px;border-radius: 5px;box-shadow: 0px 3px #ccc;"><img src="/assets/img/shouty.png" /> {{transaction.confirmations}} Confirmations</div>
                    <div class="row"><a href="{{formatTransactionUrl(transaction.txid)}}" target="_blank">See transaction details</a></div>
                  </span>
                </div>
              </div>
              <div class="row">
                <div class="col-xs-offset-1 col-xs-11">
                  <div><img src="/assets/img/miniomni.png">{{transaction.sendingaddress.substr(0,5)}}...{{transaction.sendingaddress.substr(-5,5)}}</div>
                  Invested {{transaction.amountsent}} {{formatCurrencyName(transaction.propertyid)}} got {{transaction.participanttokens}} tokens
                </div>
              </div>
            </div>
          </div>
          <div class="panel panel-default" ng-show='history.loading'>
            <div class="panel-body text-center">
              <img src="/assets/img/loading.gif"/>Loading transactions
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row" ng-hide="pendingThinking">
    <h4>
      <a ng-click="pendingThinking = true"> <strong> < Go back </strong> </a>
    </h4>
    <div ng-controller="WalletAssetsFormController">
    <div ng-controller="TransactionGenerationController">
    <div ng-controller="WalletSendAssetsController">
      <div class="row">
        <h3 class="text-center" >Participate on {{property.name}} Crowdsale</h3>
        <br>
        <div ng-show="showErrors" class="alert alert-danger"> <strong> {{error}} </strong> </div> 
      </div>
      <form name="sendForm" ng-submit="validateForm()">
      <div class="row">
        <div class="col-xs-6">
          <h4 class="text-justify" >Send type of coin:</h4>
          <div class="form-inline">
              <select name="coin" class="form-control" ng-model="walletAssets.selectedCoin"
                ng-options="currency as currency.name for currency in currencyList"
                ng-change="setBalance()" ng-init="setBalance()" disabled>
                <option value=""> -- Choose Coin -- </option>
              </select>
            </div> 
          <h6 class="text-justify"> To participate on this crowdsale, you must send this specific coin.</h6> 
          <h4 class="text-justify" >Send from address:</h4>
          <div class="form-inline">
             <select name="sender" class="form-control" ng-model="walletAssets.selectedAddress"
                ng-options="address for address in addressList"
                ng-change="setBalance()" ng-init="setBalance()">
                <option value=""> -- Choose Address -- </option>
              </select>
            </div> 
          <h6 class="text-justify">  
          Note that we allow you to only make contributions from addresses with a valid private key. </h6>
        </div>
      </div>
        <br>
      <div class="row">
        <div class="col-xs-12">
          <div class="input-group">
            <span class="input-group-addon"> Send funds to:</span>
            <input name="reciever" type="text" ng-model="sendTo" class="form-control" disabled>

          </div>
          <br>
          <div class="input-group">
            <span class="input-group-addon"> Amount to send (in {{selectedCoin.symbol}}): </span>
              <input name="amount" type="number" class="form-control" 
              ng-model="sendAmount" step="{{tokenStep}}" min="{{tokenMin}}" max="{{tokenMax}}" ensure-integer ensure-over="sendAmount" ensure-if="!property.divisible">
            <span class="input-group-addon" > 
              Available: {{balanceData[0]}} {{selectedCoin.symbol}}</span>
          </div>
          <br>
          <div class="input-group">
            <span class="input-group-addon"> Transaction/Miner fees (in BTC): </span>
            <input name="fees" type="number" step="0.00000001" ng-model="minerFees" class="form-control" 
            placeholder="0.0001 minimum" required>
            <span class="input-group-addon" > 
              Available Bitcoin: {{ balanceData[1]}} BTC
              </span>
          </div>
        </div>
      </div>
        <br>
      <input class="btn btn-primary btn-lg col-xs-push-3 col-xs-6" type="submit" value="Participate">
      </form>
    </div>
    </div>
    </div>
  </div>
</div>